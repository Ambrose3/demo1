---

- hosts: all
  become: true
  tasks:

  - name: Copy ssh public key to authorized_keys
    authorized_key:
      user: root
      state: present
      key: "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDUvJkP+eCowVfh7A9BDT2Ptp7hes+vbfqD8GXNe/3uZ2JaHQ5CHPFcZ/rBcZA8v54dl3xR2QsgCmQ1ahXKRWdNnf3BZ8x9yhbFnWsypLZ8Lvvzl57ORQmfnEiZDXfMe7gPUOf2cnySFZDJLNDlYfidHSy0io+2+Dk136Lhab6KSKoMkAJDvWb9W8fC20CtDPVyFC9OVLfhf80iE3+jAZm9mPVtgAoqv34VIDmY4wyglNr15l6Y6C+UL/vEbZJ/2m+80uzkZNmfTmURDvmV6Q8qDltwFwwQ/Gz1y/2A9IRy3/206Dw6hbG4sSrkoVW12TUlCtyLm689U7SZnl8OOAIGr4AxqMdvusczgEvZXEUEAMRNWVXq40uRyXQQRzgD/D7VHBq1F9WarIeKAbYOmNUPwawEObj1iEiUZmQcZDg6Gqj+pepxPZ1Q7LOpp6L3soBLxlGGyULOPYJpPNPr+h9vHEkqlkuGoitjFuTOaxzHoIfZfk4gp7tgudJd8cZE0ZAzMgPBA9I93rrr9rpk/cXVzGf9u5zrnPnMhJNqOw/+Ia6FPLMAa+BCCrUR8ejoWrhtYyP2Dh3DbGDenXuql5nzR4A3g+9CJlS79W7WSNm3NGWjWYhG1Akfj46wunwVSYs4VO1yCUbKTp7zYQIipdsAyXs7uWtMfI3ayGPB1S4WLw== ambrose"
      path: /root/.ssh/authorized_keys

  - name: update resposiroty index (CentOS)
    tags: always
    dnf:
      update_cache: yes
    when: ansible_distribution == "CentOS"

  - name: update resposiroty index
    tags: always
    apt:
      update_cache: yes
    when: ansible_distribution == "Ubuntu"